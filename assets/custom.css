/* =================== Global & Vars =================== */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; overflow-x: hidden; }
html { scrollbar-gutter: stable both-edges; }

:root{
  --nyu: #57068C;
  --nyu-dark:#43056c;
  --panel:#f2f2f4;
  --border:#e5e7eb;

  --wrap: 1200px;      /* 版心最大宽度 */
  --gutter: 20px;      /* container 左右内边距 */
  --nav-h: 64px;       /* 顶部紫条高度 */
  --footer-h: 66px;    /* 底部紫条高度 */

  --sidebar: 240px;    /* 左侧信息栏宽度 */
  --gap: 36px;         /* 信息栏与正文间距（桌面端更大一点） */

  --x-nudge: 16px;     /* 全局整体向右微移（正数=向右） */
}

/* 关掉可能的旧装饰 */
body::before, body::after,
.navbar::before, .navbar::after { content:none !important; display:none !important; }

/* 隐藏主题自带头像 header */
.header{ display:none !important; }

/* 链接配色 */
a{ color:var(--nyu); }
a:hover{ color:#6c2ca2; }

/* 版心：正文容器 */
.container, main, .page-content{
  max-width:var(--wrap);
  margin:0 auto;
  padding:0 var(--gutter);
}

/* =================== Top Navbar（固定 + 真·全宽） =================== */
.navbar{
  position:fixed !important;
  top:0;
  height:var(--nav-h);
  background:var(--nyu) !important;
  border:none !important;
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  z-index:1000;

  /* full-bleed：让背景横穿到最左/最右 */
  width:100vw;
  margin-left:calc(50% - 50vw);
  margin-right:calc(50% - 50vw);
}
.navbar-spacer{ display:none !important; }

.navbar > .container{
  min-height:var(--nav-h);
  display:flex; align-items:center; justify-content:center;
  gap:28px; padding:0 16px;
}
.navbar-list{ list-style:none; display:flex; gap:28px; margin:0; padding:0; }
.navbar-item{ margin:0; }
.navbar-link{
  color:#fff !important; text-transform:uppercase; letter-spacing:.12rem;
  text-decoration:none; font-weight:600; padding:8px 6px; line-height:1; border-radius:6px;
}
.navbar-link:hover{ background:var(--nyu-dark); color:#fff !important; }

/* 正文整体让出固定顶/底栏空间 */
body{ padding-top:var(--nav-h); padding-bottom:var(--footer-h); }

/* =================== 双栏布局 =================== */
.content-with-sidebar{ margin-top:16px; }

/* —— 小屏（< 900px）：单栏 —— */
@media (max-width: 899.98px){
  .content-with-sidebar{ display:block; }
  .side-col{ width:100% !important; margin-bottom:16px; position:static !important; }
  .sidepanel{
    background:var(--panel); border:1px solid var(--border);
    border-radius:12px; padding:16px; box-shadow:0 6px 18px rgba(0,0,0,.06);
  }
}

/* —— 桌面端（≥ 900px）：左侧固定，右侧正文右移 —— */
@media (min-width: 900px){
  .content-with-sidebar{ display:block; padding-left: var(--x-nudge) !important; }

  .side-col{
    position:fixed !important;
    left:calc(50vw - (var(--wrap)/2) + var(--gutter) + var(--x-nudge));
    top:calc(var(--nav-h) + 16px);
    width:var(--sidebar) !important;
    max-width:var(--sidebar) !important;
    min-width:var(--sidebar) !important;
    z-index:15;
  }
  .sidepanel{
    width:100% !important;
    height:calc(100vh - var(--nav-h) - var(--footer-h) - 32px) !important;
    overflow:auto !important;
    background:var(--panel); border:1px solid var(--border);
    border-radius:12px; padding:16px; box-shadow:0 6px 18px rgba(0,0,0,.06);
  }

  .main-col{
    margin-left:calc(var(--sidebar) + var(--gap)) !important;
    max-width:860px; min-width:0;
  }
}

/* 侧栏内容细节 */
.sidepanel .portrait{
  display:block; width:100%; height:180px; object-fit:cover;
  border-radius:10px; margin-bottom:12px;
}
.kicker{
  margin:18px 0 8px; font-size:12px; font-weight:700;
  letter-spacing:.12rem; text-transform:uppercase; color:#111827;
}
.sidepanel ul{ list-style:none; padding:0; margin:4px 0 10px; }
.sidepanel li{ margin:6px 0; }
.sidepanel a{ text-decoration:none; }
.sidepanel a:hover{ text-decoration:underline; }
.profile-name{ font-size:26px; font-weight:800; color:#111 !important; line-height:1.2; }

/* =================== 正文视觉 =================== */
.docs-section{ padding:2rem 0; border-top:1px solid var(--border); }
.docs-section > h4, .section-header{
  font-size:2rem; font-weight:700; letter-spacing:.02rem;
  text-transform:none; margin:0 0 .8rem;
}
.main-col b, .main-col strong{ color:#111 !important; font-weight:700; }

/* =================== Bottom Footer（固定 + 真·全宽） =================== */
.footer{
  position:fixed !important;
  bottom:0;
  height:var(--footer-h) !important;
  background:var(--nyu) !important;
  color:#fff !important;
  border-top:none !important;
  z-index:999;
  display:flex !important; align-items:center !important;
  padding:0 !important;

  /* full-bleed */
  width:100vw;
  margin-left:calc(50% - 50vw);
  margin-right:calc(50% - 50vw);
}
.footer .container, .footer .row{
  width:100%; height:100%;
  max-width:var(--wrap);
  margin:0 auto;
  display:flex !important; align-items:center !important; justify-content:space-between !important;
  padding:0 32px !important;
}
.footer *{ margin-top:0 !important; margin-bottom:0 !important; line-height:1 !important; }

/* =================== 兼容 Skeleton 的列宽（强覆盖） =================== */
@media (min-width: 900px){
  .content-with-sidebar .side-col{
    width:var(--sidebar) !important;
    max-width:var(--sidebar) !important;
    min-width:var(--sidebar) !important;
    padding-left:0 !important; padding-right:0 !important;
    flex:0 0 var(--sidebar) !important;
  }
}

/* =================== 时间线对齐（保持你现在的修正） =================== */
.timeline { --line-x: 50%; position: relative; }
.timeline::before{
  content:""; position:absolute; top:0; bottom:0; left:var(--line-x);
  width:6px; background:#3b3b3b; transform:translateX(-50%);
}
.timeline .timeline-icon, .timeline .node, .timeline .dot{
  position:absolute; left:var(--line-x) !important; transform:translate(-50%, -50%) !important;
}
.timeline .direction-l, .timeline .direction-r{ width:50%; position:relative; }
.timeline .direction-l{ padding-right:48px; text-align:right; }
.timeline .direction-r{ padding-left:48px;  text-align:left;  }
.timeline .flag{
  display:inline-block; max-width:520px; background:#fff; border-radius:10px;
  padding:10px 14px; box-shadow:0 6px 18px rgba(0,0,0,.06); margin:0;
}
.timeline .direction-r .flag{ margin-left:0 !important; }
.timeline .direction-l .flag{ margin-right:0 !important; }
.timeline .time-wrapper{ position:absolute; top:-6px; white-space:nowrap; }
.timeline .direction-r .time-wrapper{ left:calc(var(--line-x) + 12px); right:auto !important; }
.timeline .direction-l .time-wrapper{ right:calc(100% - var(--line-x) + 24px); left:auto !important; }
.timeline{ --gap: 44.944px; }
.timeline .direction-l{ padding-right: var(--gap) !important; }
.timeline .direction-r{ padding-left:  var(--gap) !important; }
.timeline .timeline-icon, .timeline .node, .timeline .dot{ left:50% !important; transform:translate(-50%, -50%) !important; }
.timeline .direction-r{ transform: translateX(-6.3px); }
.navbar-link { font-size:15px !important; font-weight:600; letter-spacing:.12rem; }

/* =================== Mobile 单栏优化（≤900px） =================== */
@media (max-width: 899.98px){

  :root{
    --gutter:16px;
    --nav-h:56px;
    --footer-h:62px;
  }

  /* 顶部导航可横向滑动，左对齐 */
  .navbar > .container{
    justify-content:flex-start;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    gap:18px; padding:0 12px;
  }
  .navbar-list{ flex-wrap:nowrap; gap:18px; }
  .navbar-link{ font-size:14px !important; padding:10px 4px; }

  /* 模块间距与锚点补偿 */
  .content-with-sidebar{ margin-top:12px; }
  .docs-section{ padding:1.25rem 0; scroll-margin-top:calc(var(--nav-h) + 10px); }
  .docs-section > h4, .section-header{ font-size:1.6rem; margin:0 0 .6rem; }

  /* 侧栏卡片化 + 头像正方形（避免被裁成长方形） */
  .sidepanel{ height:auto !important; max-height:none !important; }
  .sidepanel .portrait{
    width:70vw; max-width:340px;
    aspect-ratio:1 / 1;   /* 关键：强制正方形 */
    height:auto; display:block;
    margin:0 auto 12px;   /* 居中 */
    object-fit:cover; object-position:50% 35%;
    border-radius:14px;
  }
  .sidepanel .profile-name{ font-size:24px; }

  /* 正文铺满 */
  .main-col{ margin-left:0 !important; max-width:100% !important; }

  /* 时间线改为左侧竖线 */
  .timeline{ --line-x:24px; --gap:18px; }
  .timeline::before{ left:var(--line-x); width:4px; transform:translateX(0); }
  .timeline .direction-l, .timeline .direction-r{
    width:100%; padding:0 0 0 calc(var(--line-x) + 24px); text-align:left; transform:none;
  }
  .timeline .flag{ max-width:100%; margin:0 !important; display:block; }
  .timeline .timeline-icon, .timeline .node, .timeline .dot{
    left:var(--line-x) !important; transform:translate(-50%, -50%) !important;
  }
  .timeline .time-wrapper{ left:calc(var(--line-x) + 12px) !important; right:auto !important; top:-6px; }
}

/* =================== Mobile Portrait 进一步收紧（≤480px） =================== */
@media (max-width: 480px) and (orientation: portrait){
  .sidepanel{ padding:12px; border-radius:12px; }
  .sidepanel .portrait{
    width:68vw; max-width:320px; aspect-ratio:1/1; height:auto;
    object-fit:cover; object-position:50% 35%;
  }
  .sidepanel .profile-name{ font-size:20px; }
  .container, main, .page-content{ padding:0 14px; }
  .navbar > .container{ gap:8px; padding:0 10px; }
  .navbar-list{ flex-wrap:wrap; gap:8px 10px; }
  .navbar-link{ font-size:13px !important; letter-spacing:.08rem; padding:6px 6px; }
  :root{ --footer-h:58px; }
  body{ padding-bottom:var(--footer-h); }
  .footer{ height:var(--footer-h) !important; }
  .footer .container, .footer .row{ padding:0 16px !important; }
}
