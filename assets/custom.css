/* =================== Global & Vars =================== */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; overflow-x: hidden; }
html { scrollbar-gutter: stable both-edges; }

:root{
  --nyu: #57068C;
  --nyu-dark: #43056c;
  --panel: #f2f2f4;
  --border:#e5e7eb;

  --wrap: 1200px;
  --gutter: 20px;
  --nav-h: 64px;
  --footer-h: 66px;

  --sidebar: 240px;
  --gap: 28px;
}

body::before, body::after,
.navbar::before, .navbar::after { content: none !important; display: none !important; }

.header{ display:none !important; }

a{ color: var(--nyu); }
a:hover{ color: #6c2ca2; }

.container, main, .page-content{
  max-width: var(--wrap);
  margin: 0 auto;
  padding: 0 var(--gutter);
}

/* =================== Top Navbar =================== */
.navbar{
  position: fixed !important;
  top: 0; left: 0; right: 0;
  height: var(--nav-h);
  background: var(--nyu) !important;
  border: none !important;
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
  z-index: 1000;
}
.navbar-spacer{ display:none !important; }

.navbar > .container{
  min-height: var(--nav-h);
  display: flex; align-items: center; justify-content: center;
  gap: 28px; padding: 0 16px;
}
.navbar-list{ list-style: none; display: flex; gap: 28px; margin: 0; padding: 0; }
.navbar-item{ margin: 0; }
.navbar-link{
  color:#fff !important; text-transform: uppercase; letter-spacing:.12rem;
  text-decoration: none; font-weight: 600; padding: 8px 6px; line-height: 1; border-radius: 6px;
}
.navbar-link:hover{ background: var(--nyu-dark); color:#fff !important; }

body{ padding-top: var(--nav-h); padding-bottom: var(--footer-h); }

/* =================== Two-column Layout =================== */
.content-with-sidebar{ margin-top: 16px; }

@media (max-width: 899.98px){
  .content-with-sidebar{ display: block; }
  .side-col{ width: 100% !important; margin-bottom: 16px; }
  .sidepanel{ background: var(--panel); border:1px solid var(--border); border-radius:12px; padding:16px; }
}

@media (min-width: 900px){
  .content-with-sidebar{
    display: block;
  }
  .side-col{
    position: fixed !important;
    left: calc(50vw - (var(--wrap) / 2) + var(--gutter));
    top:  calc(var(--nav-h) + 16px);
    width: var(--sidebar) !important;
    max-width: var(--sidebar) !important;
    min-width: var(--sidebar) !important;
    z-index: 15;
  }
  .sidepanel{
    width: 100% !important;
    height: calc(100vh - var(--nav-h) - var(--footer-h) - 32px) !important;
    overflow: auto !important;
    background: var(--panel);
    border:1px solid var(--border);
    border-radius:12px;
    padding:16px;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
  }
  .main-col{
    margin-left: calc(var(--sidebar) + var(--gap)) !important;
    max-width: 860px;
    min-width: 0;
  }
}

/* Sidebar details */
.sidepanel .portrait{
  display:block; width:100%; height:180px; object-fit:cover; border-radius:10px; margin-bottom:12px;
}
.kicker{
  margin:18px 0 8px; font-size:12px; font-weight:700;
  letter-spacing:.12rem; text-transform:uppercase; color:#111827;
}
.sidepanel ul{ list-style:none; padding:0; margin:4px 0 10px; }
.sidepanel li{ margin:6px 0; }
.sidepanel a{ text-decoration:none; }
.sidepanel a:hover{ text-decoration:underline; }
.profile-name{ font-size:22px; font-weight:800; color:#111 !important; line-height:1.2; }

/* =================== Main =================== */
.docs-section{ padding: 2rem 0; border-top: 1px solid var(--border); }
.docs-section > h4, .section-header{
  font-size: 2rem; font-weight: 700; letter-spacing:.02rem;
  text-transform: none; margin: 0 0 .8rem;
}
.main-col b, .main-col strong{ color:#111 !important; font-weight:700; }

/* =================== Footer =================== */
.footer{
  position: fixed !important;
  left: 0; right: 0; bottom: 0;
  height: var(--footer-h) !important;
  background: var(--nyu) !important;
  color:#fff !important;
  border-top:none !important;
  z-index: 999;
  display:flex !important; align-items:center !important;
  padding: 0 !important;
}
.footer .container, .footer .row{
  width: 100%; height: 100%;
  max-width: var(--wrap);
  margin: 0 auto;
  display:flex !important; align-items:center !important; justify-content:space-between !important;
  padding: 0 32px !important;
}
.footer *{ margin-top:0 !important; margin-bottom:0 !important; line-height:1 !important; }

/* =================== Skeleton Overrides =================== */
@media (min-width: 900px){
  .content-with-sidebar .side-col{
    width: var(--sidebar) !important;
    max-width: var(--sidebar) !important;
    min-width: var(--sidebar) !important;
    padding-left: 0 !important; padding-right: 0 !important;
    flex: 0 0 var(--sidebar) !important;
  }
}

/* Horizontal nudge */
:root{
  --x-nudge: 16px;
}
@media (min-width: 900px){
  .side-col{
    left: calc(50vw - (var(--wrap) / 2) + var(--gutter) + var(--x-nudge)) !important;
  }
  .content-with-sidebar{
    padding-left: var(--x-nudge) !important;
  }
}

/* Larger name */
.sidepanel .profile-name{
  font-size: 26px;
  line-height: 1.2;
}

/* =================== Timeline Base Fixes =================== */
.timeline {
  --line-x: 50%;
  position: relative;
}
.timeline::before {
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  left: var(--line-x);
  width: 6px;
  background: #3b3b3b;
  transform: translateX(-50%);
}
.timeline .timeline-icon,
.timeline .node,
.timeline .dot {
  position: absolute;
  left: var(--line-x) !important;
  transform: translate(-50%, -50%) !important;
}
.timeline .direction-l,
.timeline .direction-r {
  width: 50%;
  position: relative;
}
.timeline .direction-l { padding-right: 48px; text-align: right; }
.timeline .direction-r { padding-left: 48px;  text-align: left;  }
.timeline .flag {
  display: inline-block;
  max-width: 520px;
  background: #fff;
  border-radius: 10px;
  padding: 10px 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,.06);
  margin: 0;
}
.timeline .direction-r .flag { margin-left: 0 !important; }
.timeline .direction-l .flag { margin-right: 0 !important; }
.timeline .time-wrapper {
  position: absolute;
  top: -6px; white-space: nowrap;
}
.timeline .direction-r .time-wrapper { 
  left: calc(var(--line-x) + 12px);
  right: auto !important;
}
.timeline .direction-l .time-wrapper { 
  right: calc(100% - var(--line-x) + 24px);
  left: auto !important;
}

@media (max-width: 768px) {
  .timeline .direction-l,
  .timeline .direction-r {
    width: 100%;
    padding: 0 0 0 48px;
    text-align: left;
  }
  .timeline .time-wrapper {
    left: calc(var(--line-x) + 24px);
    right: auto !important;
  }
}

.navbar-link {
  font-size: 15px !important;
  font-weight: 600;
  letter-spacing: .12rem;
}

/* =================== Timeline gap & alignment =================== */
.timeline{ --gap: 44.944px; }
.timeline .direction-l{ padding-right: var(--gap) !important; }
.timeline .direction-r{ padding-left:  var(--gap) !important; }
.timeline .direction-r .flag,
.timeline .direction-l .flag{
  margin: 0 !important;
}
.timeline .timeline-icon,
.timeline .node,
.timeline .dot{
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
}
.timeline .direction-r .time-wrapper{ left: calc(50% + 12px) !important; right: auto !important; }
.timeline .direction-l .time-wrapper{ right: calc(50% + 12px) !important; left: auto !important; }
.timeline .direction-r{ transform: translateX(-6.3px); }
/* =================== Universal mobile baseline (≤768px) =================== */
@media screen and (max-width: 768px){

  /* 更安全的顶部/底部留白：考虑刘海安全区 */
  :root{
    --nav-h: 56px;
    --footer-h: 62px;
  }
  body{
    padding-top: calc(var(--nav-h) + env(safe-area-inset-top, 0px));
    padding-bottom: calc(var(--footer-h) + env(safe-area-inset-bottom, 0px));
  }

  /* 导航可横向滚动，避免挤换行 */
  .navbar > .container{
    justify-content: flex-start;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    gap: 18px;
    padding: 0 12px;
  }
  .navbar-list{ flex-wrap: nowrap; gap: 18px; }
  .navbar-link{ font-size: 14px !important; padding: 10px 4px; }

  /* 单列布局为默认，避免 sticky/fixed 在手机上造成覆盖 */
  .content-with-sidebar{ display:block !important; margin-top:12px; }
  .main-col{ margin-left:0 !important; max-width:100% !important; }

  /* ===== 信息栏：默认“极简模式”（只保留头像+姓名） ===== */
  /* 先全部隐藏，再白名单打开头像和姓名，确保不被上层样式覆盖 */
  .sidepanel *{ display:none !important; }
  .sidepanel .portrait,
  .sidepanel .profile-name{ display:block !important; }

  /* 去灰底、边框、阴影，收紧内边距（极简） */
  .sidepanel{
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 8px 0 !important;
  }

  /* 头像：正方形、居中、不变形（大多数手机竖屏） */
  .sidepanel .portrait{
    width: min(72vw, 340px);
    aspect-ratio: 1 / 1;
    height: auto;
    display:block;
    margin: 0 auto 10px;
    object-fit: cover;
    object-position: 50% 35%;
    border-radius: 14px;
  }

  /* 姓名：放大加粗且可见（防止被继承隐藏） */
  .sidepanel .profile-name{
    font-size: clamp(22px, 6vw, 28px) !important;
    font-weight: 800 !important;
    line-height: 1.15 !important;
    text-align: center !important;
    margin: 0 0 6px !important;
    color: #111 !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* 锚点跳转时别被固定导航挡住 */
  .docs-section{ scroll-margin-top: calc(var(--nav-h) + 10px); }
}

/* =================== Phone portrait (≤480px portrait) =================== */
@media screen and (max-width: 480px) and (orientation: portrait){
  /* 头像更紧凑一些，减少首屏占比 */
  .sidepanel .portrait{ width: min(70vw, 300px); }
  .sidepanel .profile-name{ font-size: clamp(20px, 6.5vw, 26px) !important; }

  /* 容器左右内边距略收紧 */
  .container, main, .page-content{ padding: 0 14px; }

  /* 导航在很小屏幕可换行 */
  .navbar > .container{ gap:8px; padding:0 10px; }
  .navbar-list{ flex-wrap: wrap; gap:8px 10px; }
  .navbar-link{ font-size: 13px !important; letter-spacing:.08rem; padding: 6px 6px; }
}

/* =================== Phone landscape (≤768px landscape) =================== */
@media screen and (max-width: 768px) and (orientation: landscape){

  /* 横屏改为“完整信息卡”置顶的单列，避免侧栏漂移覆盖 */
  .content-with-sidebar{ display:block !important; }
  .side-col{
    position: static !important;
    width: 100% !important; max-width: 100% !important; min-width: 0 !important;
    margin-bottom: 12px !important;
  }

  /* 取消极简隐藏，还原所有信息 */
  .sidepanel *{ display: revert !important; }

  /* 恢复卡片外观 */
  .sidepanel{
    background: var(--panel) !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 6px 18px rgba(0,0,0,.06) !important;
    border-radius: 12px !important;
    padding: 12px !important;
  }

  /* 头像等比例缩放，不裁切（横屏更易超宽，改用 contain） */
  .sidepanel .portrait{
    width: 100% !important;
    height: auto !important;
    max-height: 40svh !important;   /* 新视口单位，更稳的可视高 */
    object-fit: contain !important;  /* 不裁切 */
    aspect-ratio: auto !important;
    border-radius: 10px !important;
    margin-bottom: 10px !important;
  }

  /* 姓名回归正常阅读字号 */
  .sidepanel .profile-name{
    font-size: clamp(18px, 3vw, 22px) !important;
    font-weight: 800 !important;
    text-align: left !important;
    margin-bottom: 6px !important;
  }
}

/* =================== Ultra-small devices (≤360px) =================== */
@media screen and (max-width: 360px){
  .sidepanel .portrait{ width: 80vw; }
  .navbar-link{ font-size: 12px !important; }
}

/* =================== Reduced motion preference =================== */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}
