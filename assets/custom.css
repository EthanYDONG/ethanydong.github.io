/* ===== Full-bleed navbar (incl. iOS safe areas) ===== */
.navbar{
  left: 0;
  right: 0;
  width: 100vw;                     /* force edge-to-edge background */
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

/* 防止 100vw 在部分浏览器造成横向微滚动 */
html, body { overflow-x: clip; }

/* ===== Desktop: enlarge gap between sidebar & content ===== */
@media (min-width: 900px){
  :root{ --gap: 36px; }             /* was 28px */
  .main-col{
    margin-left: calc(var(--sidebar) + var(--gap)) !important;
  }
}

/* ===== Tablet: 保持更舒服的间距（可选） ===== */
@media (min-width: 900px) and (max-width: 1200px){
  .main-col{
    margin-left: calc(var(--sidebar) + var(--gap)) !important;
  }
}

/* ===== Mobile: avatar never cropped, single-column polish ===== */
@media (max-width: 899.98px){
  /* 侧栏与正文更通透一点 */
  .content-with-sidebar{ gap: 20px; }

  /* 头像：等比完整显示，不裁切 */
  .sidepanel .portrait{
    width: min(72vw, 320px);
    height: auto;                   /* cancel the fixed 140/180px */
    aspect-ratio: auto;             /* no forced square here */
    object-fit: contain;            /* see whole photo */
    background: var(--panel);       /* reveal margins around image */
    display: block;
    margin: 0 auto 12px;
    border-radius: 14px;
  }
}

/* ===== Mobile Portrait: 再收紧一些（可选） ===== */
@media (max-width: 480px) and (orientation: portrait){
  .sidepanel .portrait{
    width: min(78vw, 320px);        /* a bit larger on very small screens */
  }
}
